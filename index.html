<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Súper Maratón Sureste</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState } from 'https://esm.sh/react@18.2.0';
        import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client';
        import { 
            Trophy, Star, ArrowRight, RefreshCw, Home, Heart, 
            Map, BookOpen, Calculator, Sparkles, Activity, AlertCircle 
        } from 'https://esm.sh/lucide-react@0.284.0';

        // --- DATOS DEL JUEGO ---
        const CATEGORIES = [
            { id: 'math', name: 'Números', color: 'bg-blue-500', icon: <Calculator size={20}/> },
            { id: 'lang', name: 'Letras', color: 'bg-red-500', icon: <BookOpen size={20}/> },
            { id: 'geo', name: 'Mi Tierra', color: 'bg-green-500', icon: <Map size={20}/> },
            { id: 'nature', name: 'Selva', color: 'bg-emerald-600', icon: <Sparkles size={20}/> },
            { id: 'lit', name: 'Cuentos', color: 'bg-pink-500', icon: <BookOpen size={20}/> },
            { id: 'body', name: 'Mi Cuerpo', color: 'bg-purple-500', icon: <Heart size={20}/> },
        ];

        const QUESTIONS_DATA = [
            { id: 1, text: "¿Qué pueblo del sureste inventó el número cero?", options: ["Los Mayas", "Los Gigantes", "Los Astronautas"], correct: 0, cat: 'math' },
            { id: 2, text: "¿Cómo se llama el gato más grande y fuerte de nuestra selva?", options: ["Gato de casa", "Jaguar", "León"], correct: 1, cat: 'nature' },
            { id: 3, text: "¿De qué semilla sale el chocolate?", options: ["Cacao", "Frijol", "Arroz"], correct: 0, cat: 'nature' },
            { id: 4, text: "¿En qué estado cayó el asteroide de los dinosaurios?", options: ["Tabasco", "Yucatán", "Chiapas"], correct: 1, cat: 'geo' },
            { id: 5, text: "¿Quién tenía una nariz que crecía cuando decía mentiras?", options: ["Pinocho", "Peter Pan", "El Lobo"], correct: 0, cat: 'lit' },
            { id: 6, text: "¿De qué color es la caperucita del cuento?", options: ["Verde", "Azul", "Roja"], correct: 2, cat: 'lit' },
            { id: 7, text: "¿Quién perdió su zapatito de cristal en el baile?", options: ["Blanca Nieves", "Cenicienta", "La Sirenita"], correct: 1, cat: 'lit' },
            { id: 8, text: "¿Qué animal es 'Bambi'?", options: ["Un conejo", "Un venado", "Un tlacuache"], correct: 1, cat: 'lit' },
            { id: 9, text: "¿Cómo debe empezar siempre el nombre de una persona?", options: ["Con minúscula", "Con un dibujo", "Con Mayúscula"], correct: 2, cat: 'lang' },
            { id: 10, text: "¿Cuántos dedos tienes en total sumando tus dos manos?", options: ["5 dedos", "10 dedos", "20 dedos"], correct: 1, cat: 'math' },
        ];

        const PHYSICAL_CHALLENGES = [
            "¡Salta como un jaguar 5 veces!",
            "¡Da 3 vueltas como un trompo!",
            "¡Tócate la punta de los pies sin doblar las rodillas!",
            "¡Haz equilibrio en un solo pie mientras cuentas hasta 5!",
            "¡Corre en tu lugar muy rápido por 10 segundos!",
            "¡Imita el vuelo de un tucán moviendo tus brazos!"
        ];

        // --- COMPONENTE PRINCIPAL ---
        function App() {
            const [gameState, setGameState] = useState('menu');
            const [currentQuestion, setCurrentQuestion] = useState(null);
            const [score, setScore] = useState(0);
            const [questionCount, setQuestionCount] = useState(0);
            const [currentChallenge, setCurrentChallenge] = useState('');

            const SuperheroAvatar = () => (
                <div className="relative w-32 h-32 mx-auto mb-4 drop-shadow-lg">
                    <svg viewBox="0 0 100 100" className="w-full h-full">
                        <circle cx="50" cy="40" r="30" fill="#FFDBAC" />
                        <path d="M20 40 Q20 10 50 10 Q80 10 80 40" fill="#3B2619" />
                        <rect x="25" y="30" width="50" height="15" rx="5" fill="#1E3A8A" />
                        <circle cx="40" cy="37" r="4" fill="white" />
                        <circle cx="60" cy="37" r="4" fill="white" />
                        <path d="M40 55 Q50 65 60 55" stroke="red" strokeWidth="2" fill="none" />
                        <path d="M30 70 L70 70 L80 100 L20 100 Z" fill="#1E3A8A" />
                        <path d="M20 70 Q10 70 5 90" fill="#FACC15" />
                        <path d="M80 70 Q90 70 95 90" fill="#FACC15" />
                        <circle cx="50" cy="85" r="8" fill="#FACC15" />
                        <text x="46" y="90" fontSize="8" fontWeight="bold" fill="#1E3A8A">S</text>
                    </svg>
                </div>
            );

            const startGame = () => {
                setScore(0);
                setQuestionCount(0);
                pickQuestion();
            };

            const pickQuestion = () => {
                const randomIdx = Math.floor(Math.random() * QUESTIONS_DATA.length);
                setCurrentQuestion(QUESTIONS_DATA[randomIdx]);
                setGameState('playing');
            };

            const handleAnswer = (index) => {
                const isCorrect = index === currentQuestion.correct;
                if (isCorrect) {
                    setScore(s => s + 1);
                    setGameState('feedback');
                } else {
                    setCurrentChallenge(PHYSICAL_CHALLENGES[Math.floor(Math.random() * PHYSICAL_CHALLENGES.length)]);
                    setGameState('challenge');
                }
                setQuestionCount(q => q + 1);
            };

            const nextStep = () => {
                if (questionCount >= 5) {
                    setGameState('finished');
                } else {
                    pickQuestion();
                }
            };

            return (
                <div className="min-h-screen bg-[#FDFCF0] font-sans text-slate-800 flex flex-col items-center justify-center p-4">
                    <div className="w-full max-w-sm bg-white rounded-[3rem] shadow-2xl border-8 border-slate-100 overflow-hidden relative">
                        <div className="bg-blue-600 p-6 pb-12 text-center text-white relative">
                            <h1 className="text-xl font-black mt-2">SUPER MARATÓN</h1>
                            <p className="text-xs font-bold opacity-80 uppercase tracking-tighter">Edición Sureste</p>
                        </div>

                        <div className="p-6 -mt-8 bg-white rounded-t-[2.5rem] min-h-[450px] flex flex-col">
                            {gameState === 'menu' && (
                                <div className="flex-1 flex flex-col justify-center items-center text-center py-4">
                                    <SuperheroAvatar />
                                    <h2 className="text-2xl font-extrabold text-blue-900 mb-2">¡Hola, Súper Amigo!</h2>
                                    <button onClick={startGame} className="bg-yellow-400 hover:bg-yellow-500 text-blue-900 font-black py-5 px-12 rounded-2xl text-xl shadow-[0_6px_0_rgb(202,138,4)] transition-all active:translate-y-1 active:shadow-none">
                                        ¡JUGAR!
                                    </button>
                                </div>
                            )}

                            {gameState === 'playing' && currentQuestion && (
                                <div className="space-y-6">
                                    <div className="flex justify-between items-center text-blue-600 font-black">
                                        <span>Pregunta {questionCount + 1}/5</span>
                                    </div>
                                    <div className="bg-blue-50 p-4 rounded-2xl border-l-4 border-blue-500">
                                        <p className="text-lg font-bold text-blue-900">{currentQuestion.text}</p>
                                    </div>
                                    <div className="grid gap-3">
                                        {currentQuestion.options.map((option, idx) => (
                                            <button key={idx} onClick={() => handleAnswer(idx)} className="p-4 text-left bg-white border-2 border-slate-100 rounded-2xl font-bold shadow-sm active:bg-blue-50 transition-all flex items-center gap-3">
                                                <div className="w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-blue-600">{idx + 1}</div>
                                                {option}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {gameState === 'feedback' && (
                                <div className="flex-1 flex flex-col justify-center text-center space-y-6">
                                    <div className="animate-bounce"><SuperheroAvatar /></div>
                                    <h2 className="text-3xl font-black text-green-500">¡SÚPER BIEN!</h2>
                                    <button onClick={nextStep} className="bg-blue-600 text-white font-bold py-4 rounded-2xl text-lg flex items-center justify-center gap-2">
                                        Siguiente <ArrowRight />
                                    </button>
                                </div>
                            )}

                            {gameState === 'challenge' && (
                                <div className="flex-1 flex flex-col justify-center text-center space-y-6">
                                    <Activity className="w-16 h-16 text-orange-500 mx-auto" />
                                    <h2 className="text-2xl font-black text-orange-600">¡RETO DE ENERGÍA!</h2>
                                    <div className="bg-orange-50 p-6 rounded-2xl border-2 border-dashed border-orange-300">
                                        <p className="text-xl font-black">{currentChallenge}</p>
                                    </div>
                                    <button onClick={nextStep} className="bg-orange-500 text-white font-bold py-4 rounded-2xl text-lg">
                                        ¡LISTO!
                                    </button>
                                </div>
                            )}

                            {gameState === 'finished' && (
                                <div className="flex-1 flex flex-col justify-center text-center space-y-6">
                                    <Trophy className="w-24 h-24 text-yellow-400 mx-auto" />
                                    <h2 className="text-3xl font-black text-blue-900">¡MISIÓN CUMPLIDA!</h2>
                                    <p className="text-4xl font-black text-blue-600">{score}/5 Puntos</p>
                                    <button onClick={() => setGameState('menu')} className="bg-green-500 text-white font-bold py-4 rounded-2xl text-lg">
                                        OTRA VEZ
                                    </button>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
